{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\Admin\\\\Desktop\\\\chatapp\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:\\\\Users\\\\Admin\\\\Desktop\\\\chatapp\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import queryString from'query-string';import io from'socket.io-client';import{MDBContainer,MDBRow,MDBCol,MDBCard,MDBCardBody,MDBCardHeader}from'mdbreact';import Input from'../Input/Input';import Messages from'../Messages/Messages';import'../Join/Join.css';import'./Chat.css';var socket;var Chat=function Chat(_ref){var location=_ref.location;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),room=_useState4[0],setRoom=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),message=_useState6[0],setMessage=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),messages=_useState8[0],setMessages=_useState8[1];var ENDPOINT='https://react-chat-pp.herokuapp.com/';useEffect(function(){var _queryString$parse=queryString.parse(location.search),name=_queryString$parse.name,room=_queryString$parse.room;socket=io(ENDPOINT);setName(name);setRoom(room);socket.emit('Joined',{name:name,room:room},function(){});return function(){socket.emit('disconnect');socket.off();};},[ENDPOINT,location.search]);useEffect(function(){socket.on('message',function(message){setMessages([].concat(_toConsumableArray(messages),[message]));});},[messages]);var sendMessage=function sendMessage(event){event.preventDefault();if(message){socket.emit('sendMessage',message,function(){return setMessage('');});}};console.log(message,messages);return/*#__PURE__*/React.createElement(\"div\",{className:\"bg\"},/*#__PURE__*/React.createElement(MDBContainer,null,/*#__PURE__*/React.createElement(MDBRow,{className:\"d-flex justify-content-center\"},/*#__PURE__*/React.createElement(MDBCol,{sm:\"12\",md:\"6\",lg:\"4\",xl:\"4\"},/*#__PURE__*/React.createElement(MDBCard,{className:\"bgbox my-5 \"},/*#__PURE__*/React.createElement(\"div\",{className:\" \"},/*#__PURE__*/React.createElement(\"div\",{className:\" cardy  \"},/*#__PURE__*/React.createElement(MDBCardHeader,{className:\"teal darken-4 rounded-0 border-0 w-100 text-white pb-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex float-right\"},/*#__PURE__*/React.createElement(\"a\",null,/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-video\"})),/*#__PURE__*/React.createElement(\"a\",null,\" \",/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-phone ml-3\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},/*#__PURE__*/React.createElement(\"a\",{href:\"/\",className:\"small mr-3 text-white\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-arrow-left\"})),/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-comments mr-2\"}),\" \",/*#__PURE__*/React.createElement(\"h6\",null,name,\"  \",/*#__PURE__*/React.createElement(\"span\",{className:\"small d-flex\"},\" \",room,\" \"),\" \",/*#__PURE__*/React.createElement(\"span\",{className:\"small text-warning\"},\"online\"),\" \"))),/*#__PURE__*/React.createElement(\"div\",{className:\"scrollbar pt-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"force-overflow\"},/*#__PURE__*/React.createElement(Messages,{messages:messages,name:name}))))),/*#__PURE__*/React.createElement(Input,{message:message,setMessage:setMessage,sendMessage:sendMessage}))))));};export default Chat;","map":{"version":3,"sources":["C:/Users/Admin/Desktop/chatapp/client/src/components/Chat/Chat.js"],"names":["React","useEffect","useState","queryString","io","MDBContainer","MDBRow","MDBCol","MDBCard","MDBCardBody","MDBCardHeader","Input","Messages","socket","Chat","location","name","setName","room","setRoom","message","setMessage","messages","setMessages","ENDPOINT","parse","search","emit","off","on","sendMessage","event","preventDefault","console","log"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport queryString from 'query-string'\r\nimport io from 'socket.io-client'\r\n\r\nimport { MDBContainer, MDBRow, MDBCol, MDBCard, MDBCardBody, MDBCardHeader } from 'mdbreact';\r\n\r\nimport Input from '../Input/Input'\r\nimport Messages from '../Messages/Messages'\r\n\r\n\r\nimport '../Join/Join.css';\r\nimport './Chat.css'\r\n\r\nlet socket;\r\n\r\nconst Chat = ({ location }) => {\r\n    const [name, setName] = useState('');\r\n    const [room, setRoom] = useState('');\r\n    const [message, setMessage] = useState('');\r\n    const [messages, setMessages] = useState([]);\r\n\r\n    const ENDPOINT = 'https://react-chat-pp.herokuapp.com/';\r\n\r\n    useEffect(() => {\r\n        const { name, room } = queryString.parse(location.search);\r\n\r\n        socket = io(ENDPOINT);\r\n\r\n        setName(name);\r\n        setRoom(room);\r\n\r\n        socket.emit('Joined', { name, room }, () => {\r\n\r\n        });\r\n\r\n        return () => {\r\n            socket.emit('disconnect');\r\n\r\n            socket.off();\r\n        }\r\n    }, [ENDPOINT, location.search]);\r\n\r\n    useEffect(() => {\r\n        socket.on('message', (message) => {\r\n            setMessages([...messages, message]);\r\n        })\r\n    }, [messages]);\r\n\r\n    const sendMessage = (event) => {\r\n        event.preventDefault();\r\n\r\n        if (message) {\r\n            socket.emit('sendMessage', message, () => setMessage(''));\r\n        }\r\n    }\r\n\r\n    console.log(message, messages)\r\n\r\n    return (\r\n        <div className=\"bg\">\r\n            <MDBContainer>\r\n                <MDBRow className=\"d-flex justify-content-center\">\r\n                    <MDBCol sm=\"12\" md=\"6\" lg=\"4\" xl=\"4\">\r\n                        <MDBCard className=\"bgbox my-5 \">\r\n                            <div className=\" \">\r\n                            <div className=\" cardy  \">\r\n                                <MDBCardHeader className=\"teal darken-4 rounded-0 border-0 w-100 text-white pb-0\">\r\n\r\n                                    <div className=\"d-flex float-right\">\r\n                                        <a><i className=\"fas fa-video\"></i></a>\r\n\r\n                                        <a> <i className=\"fas fa-phone ml-3\"></i></a>\r\n                                    </div>\r\n\r\n                                    <div className=\"d-flex\" >\r\n\r\n                                        <a href=\"/\" className=\"small mr-3 text-white\"><i className=\"fas fa-arrow-left\"></i></a>\r\n\r\n                                        <i className=\"fas fa-comments mr-2\"></i> <h6>{name}  <span className=\"small d-flex\"> {room} </span> <span className=\"small text-warning\">online</span> </h6>\r\n                                    </div>\r\n\r\n\r\n\r\n                                </MDBCardHeader>\r\n                                \r\n                                    <div className=\"scrollbar pt-2\">\r\n                                    <div className=\"force-overflow\">\r\n                                <Messages messages={messages} name={name} />\r\n                            </div>\r\n                            </div>\r\n                            </div>\r\n                            </div>\r\n                            <Input message={message} setMessage={setMessage} sendMessage={sendMessage} />\r\n                        </MDBCard>\r\n                    </MDBCol>\r\n                </MDBRow>\r\n            </MDBContainer>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Chat;"]},"metadata":{},"sourceType":"module"}